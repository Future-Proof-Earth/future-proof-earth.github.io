<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Explorer - Futureproof</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- React and ReactDOM -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- React Icons (replacing Lucide) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/lucide-react.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Raleway', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #8948c9 100%);
            background-size: 150% 150%;
            animation: gradient 10s ease infinite;
            padding: 2rem;
            color: white;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1.5rem 2rem;
            background: rgba(255, 255, 255, 0);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            color: white;
            text-decoration: none;
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-demo-container {
            display: flex;
            gap: 1rem;
        }

        .nav-demo-button {
            padding: 0.5rem 1rem;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 300;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-demo-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .nav-demo-button.active {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 400;
        }

        /* Add padding to main-container to account for fixed nav */
        .main-container {
            padding-top: 6rem !important;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
            margin-top: 6rem; /* Add space for fixed nav */
            padding: 0 2rem;
        }

        .demo-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .demo-description {
            font-size: 1.2rem;
            font-weight: 300;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        @media screen and (max-width: 768px) {
            .demo-title {
                font-size: 2rem;
            }
            
            .demo-description {
                font-size: 1rem;
                padding: 0 1rem;
            }
        }

        @media screen and (max-width: 768px) {
            .nav-container {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .nav-demo-container {
                width: 100%;
                justify-content: center;
            }

            .main-container {
                padding-top: 7rem !important;
            }
        }

        .main-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .glassmorphic {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
        }

        .topic-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .gradient-button {
            background:rgba(255, 255, 255, 0);
            color: white;
            border: 1px solid white;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1.25rem;
        }

        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .chevron-icon {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .chevron-icon.expanded {
            transform: rotate(90deg);
        }

        @media screen and (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .glassmorphic {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <nav class="nav-container">
        <a href="/" class="nav-logo">Futureproof</a>
        <div class="nav-demo-container">
            <a href="/narrative-shift.html" class="nav-demo-button">Narrative Shift</a>
            <a href="/decision-explorer.html" class="nav-demo-button">Decision Explorer</a>
        </div>
    </nav>
    <div class="demo-header">
        <h1 class="demo-title">Decision Explorer</h1>
        <p class="demo-description">Navigate the complexity behind major policy decisions. Uncover the interconnected factors that shape our choices.</p>
    </div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        // Simple chevron components since we can't easily import Lucide in this context
        const ChevronRight = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m9 18 6-6-6-6"/>
            </svg>
        );
        
        const ChevronDown = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m6 9 6 6 6-6"/>
            </svg>
        );

        const TopicBreakdown = () => {
            const [expandedItems, setExpandedItems] = useState(new Set());
            const [isExpanded, setIsExpanded] = useState(false);

            const sampleBreakdown = {
                title: 'Should the UK leave the EU?',
                subtopics: [
                    {
                        id: 'economic',
                        title: 'Economic Impact',
                        summary: 'Trade, financial services, and budgetary implications of EU membership affect every sector of the UK economy',
                        factors: [
                            {
                                id: 'trade',
                                title: 'Trade Relations',
                                summary: 'The EU is the UK\'s largest trading partner, with 42% of UK exports going to EU countries in 2023',
                                sources: [
                                    'Office for National Statistics - UK Trade Report 2023',
                                    'House of Commons Library - UK-EU Trading Relationship',
                                    'Institute for Fiscal Studies - Brexit Trade Analysis'
                                ],
                                expertViews: {
                                    perspective1: 'Trade economists generally agree that EU membership reduces trade friction through standardized regulations and zero tariffs',
                                    perspective2: 'Some economists argue that freedom to negotiate independent trade deals could offset single market losses',
                                    perspective3: 'Supply chain experts warn of increased complexity in cross-border trade',
                                    perspective4: 'Agricultural economists highlight both risks and opportunities for farming sector'
                                },
                                subfactors: [
                                    'Single Market Access: £294bn in annual UK-EU trade flows',
                                    'Trade Agreement Requirements: Compliance with EU standards for exports',
                                    'Customs Union Implications: Impact on supply chain costs',
                                    'Global Trade Opportunities: Potential for new trade agreements',
                                    'Supply Chain Disruption: Just-in-time manufacturing concerns',
                                    'Rules of Origin: Complex requirements for product sourcing',
                                    'Technical Barriers: Non-tariff trade restrictions',
                                    'Agricultural Trade: Impact on farming exports and imports',
                                    'Services Trade: Cross-border service provision rules',
                                    'SME Impact: Effects on smaller businesses export capacity'
                                ]
                            },
                            {
                                id: 'finance',
                                title: 'Financial Services',
                                summary: 'Financial services account for 8.6% of UK GDP and are heavily interlinked with EU markets',
                                sources: [
                                    'Bank of England Financial Stability Report 2023',
                                    'TheCityUK - Key Facts about UK Financial Services',
                                    'Financial Conduct Authority - Brexit Impact Assessment'
                                ],
                                expertViews: {
                                    perspective1: 'Financial regulators emphasize the importance of maintaining regulatory equivalence',
                                    perspective2: 'Industry leaders suggest potential for regulatory innovation outside EU framework',
                                    perspective3: 'Investment banks warn of job relocations to EU financial centers',
                                    perspective4: 'Insurance sector identifies opportunities in regulatory divergence'
                                },
                                subfactors: [
                                    'Passporting Rights: Access to EU financial markets',
                                    'Financial Regulation: Compliance with EU financial rules',
                                    'City of London Status: Position as European financial hub',
                                    'Euro Clearing: £685tn annual euro derivatives clearing',
                                    'Investment Flows: Foreign direct investment patterns',
                                    'Insurance Market: Impact on cross-border insurance services',
                                    'Asset Management: Fund passport implications',
                                    'FinTech Sector: Innovation and regulatory environment',
                                    'Banking Operations: Cross-border banking services',
                                    'Market Infrastructure: Trading venue recognition'
                                ]
                            },
                            {
                                id: 'fiscal',
                                title: 'Public Finances',
                                summary: 'EU membership involves substantial financial contributions but also returns funding through various programs',
                                sources: [
                                    'HM Treasury - EU Finances Statement 2023',
                                    'European Commission - UK Financial Settlement',
                                    'Office for Budget Responsibility - Brexit Analysis'
                                ],
                                expertViews: {
                                    perspective1: 'Fiscal analysts calculate net contribution savings from exit',
                                    perspective2: 'Economic forecasters warn of reduced tax revenues from slower growth',
                                    perspective3: 'Regional development experts highlight loss of EU structural funds',
                                    perspective4: 'Public finance experts debate long-term fiscal implications'
                                },
                                subfactors: [
                                    'EU Budget Contributions: Annual membership payments',
                                    'Regional Development Funding: EU structural fund replacement',
                                    'Research Funding: Horizon Europe participation costs',
                                    'Agricultural Subsidies: Common Agricultural Policy payments',
                                    'Administrative Savings: Reduced EU bureaucracy costs',
                                    'Program Access Fees: Participation in EU programs',
                                    'Customs Revenue: Impact on tariff collection',
                                    'Economic Impact: Tax revenue implications',
                                    'Transition Costs: Implementation of new systems',
                                    'Public Sector Adjustments: Administrative restructuring'
                                ]
                            }
                        ]
                    },
                    {
                        id: 'sovereignty',
                        title: 'Sovereignty and Governance',
                        summary: 'Questions of national sovereignty, democratic control, and legal jurisdiction are central to the debate',
                        factors: [
                            {
                                id: 'lawmaking',
                                title: 'Legislative Authority',
                                summary: 'EU membership involves shared sovereignty and acceptance of EU law supremacy in certain areas',
                                sources: [
                                    'House of Commons Library - EU Law in the UK',
                                    'Supreme Court Brexit Cases Analysis',
                                    'Institute for Government - EU Law Report'
                                ],
                                expertViews: {
                                    perspective1: 'Constitutional lawyers emphasize complexity of disentangling legal systems',
                                    perspective2: 'Sovereignty advocates highlight importance of parliamentary supremacy',
                                    perspective3: 'EU law experts note benefits of harmonized regulations',
                                    perspective4: 'Legal scholars debate meaning of modern sovereignty'
                                },
                                subfactors: [
                                    'EU Law Supremacy: Relationship with UK law',
                                    'Parliamentary Sovereignty: Legislative independence',
                                    'Regulatory Autonomy: Control over standards',
                                    'Legal Jurisdiction: Role of European courts',
                                    'Democratic Accountability: EU decision-making',
                                    'Treaty Obligations: International commitments',
                                    'Devolved Powers: Impact on UK nations',
                                    'Human Rights Framework: Legal protections',
                                    'Regulatory Alignment: Future relationship',
                                    'Constitutional Reform: Legal system changes'
                                ]
                            },
                            {
                                id: 'immigration',
                                title: 'Immigration Control',
                                summary: 'Free movement of people is a fundamental EU principle affecting immigration policy',
                                sources: [
                                    'Migration Advisory Committee Reports',
                                    'Home Office Immigration Statistics',
                                    'ONS Migration Trends Analysis'
                                ],
                                expertViews: {
                                    perspective1: 'Migration economists highlight economic benefits of free movement',
                                    perspective2: 'Population experts discuss demographic implications',
                                    perspective3: 'Labor market analysts note sector-specific impacts',
                                    perspective4: 'Social policy researchers examine integration challenges'
                                },
                                subfactors: [
                                    'Free Movement: EU citizen rights',
                                    'Border Control: Immigration system changes',
                                    'Labor Market: Workforce availability',
                                    'Skills Gaps: Sector-specific needs',
                                    'Population Growth: Demographic trends',
                                    'Social Services: Public service impact',
                                    'Integration Policy: Community cohesion',
                                    'Student Migration: Education sector effects',
                                    'Family Migration: Rights and rules',
                                    'Seasonal Workers: Agricultural labor needs'
                                ]
                            }
                        ]
                    },
                    {
                        id: 'international',
                        title: 'International Relations',
                        summary: 'Brexit affects UK\'s global influence and relationships beyond the EU',
                        factors: [
                            {
                                id: 'diplomacy',
                                title: 'Diplomatic Influence',
                                summary: 'UK\'s international standing and diplomatic leverage are affected by EU membership status',
                                sources: [
                                    'Foreign Office Strategic Review',
                                    'Royal Institute of International Affairs Analysis',
                                    'European Council on Foreign Relations Reports'
                                ],
                                expertViews: {
                                    perspective1: 'Diplomats emphasize value of EU collective bargaining power',
                                    perspective2: 'Foreign policy experts highlight opportunities for independent action',
                                    perspective3: 'Security analysts discuss intelligence sharing implications',
                                    perspective4: 'Trade negotiators note complexity of separate agreements'
                                },
                                subfactors: [
                                    'Global Influence: International standing',
                                    'Alliance Politics: Strategic partnerships',
                                    'Security Cooperation: Defense arrangements',
                                    'Diplomatic Network: International presence',
                                    'Soft Power: Cultural influence',
                                    'UN Position: International organization role',
                                    'Commonwealth Relations: Historical ties',
                                    'Crisis Response: International coordination',
                                    'Aid Policy: Development assistance',
                                    'Climate Leadership: Environmental diplomacy'
                                ]
                            },
                            {
                                id: 'defense',
                                title: 'Defense and Security',
                                summary: 'Military cooperation and security arrangements are impacted by EU relationship',
                                sources: [
                                    'Ministry of Defence Strategic Review',
                                    'NATO-EU Cooperation Analysis',
                                    'Defense Select Committee Reports'
                                ],
                                expertViews: {
                                    perspective1: 'Military strategists emphasize NATO primacy',
                                    perspective2: 'Defense industry highlights procurement implications',
                                    perspective3: 'Security experts note terrorism cooperation benefits',
                                    perspective4: 'Defense economists analyze cost implications'
                                },
                                subfactors: [
                                    'Military Cooperation: Joint operations',
                                    'Intelligence Sharing: Security coordination',
                                    'Defense Industry: Procurement rules',
                                    'NATO Relationship: Alliance dynamics',
                                    'Cyber Security: Digital threats',
                                    'Counter-Terrorism: Security cooperation',
                                    'Defense Research: Technology development',
                                    'Military Mobility: Force deployment',
                                    'Space Program: Satellite systems',
                                    'Defense Standards: Equipment compatibility'
                                ]
                            }
                        ]
                    },
                    {
                        id: 'social',
                        title: 'Social and Cultural Impact',
                        summary: 'Brexit affects social policies, education, and cultural exchanges',
                        factors: [
                            {
                                id: 'education',
                                title: 'Education and Research',
                                summary: 'Academic cooperation, research funding, and student exchanges are significantly impacted',
                                sources: [
                                    'Universities UK Analysis',
                                    'Department for Education Reports',
                                    'Research Councils UK Assessment'
                                ],
                                expertViews: {
                                    perspective1: 'Academics highlight research collaboration benefits',
                                    perspective2: 'Education leaders discuss student mobility impact',
                                    perspective3: 'Research directors note funding implications',
                                    perspective4: 'Innovation experts analyze R&D effects'
                                },
                                subfactors: [
                                    'Research Funding: Grant access',
                                    'Student Exchange: Erasmus program',
                                    'Academic Collaboration: Research partnerships',
                                    'University Rankings: International standing',
                                    'Skills Recognition: Qualification frameworks',
                                    'Research Staff: Researcher mobility',
                                    'Language Learning: Cultural exchange',
                                    'Innovation Networks: Knowledge transfer',
                                    'Education Standards: Quality frameworks',
                                    'Research Infrastructure: Facility access'
                                ]
                            },
                            {
                                id: 'rights',
                                title: 'Citizens\' Rights',
                                summary: 'Individual rights and protections are affected by EU membership status',
                                sources: [
                                    'Equality and Human Rights Commission',
                                    'Citizens Advice Bureau Analysis',
                                    'Civil Rights Organizations Reports'
                                ],
                                expertViews: {
                                    perspective1: 'Rights lawyers note EU protection framework benefits',
                                    perspective2: 'Employment experts discuss worker rights implications',
                                    perspective3: 'Consumer advocates analyze protection standards',
                                    perspective4: 'Social policy researchers examine equality impacts'
                                },
                                subfactors: [
                                    'Worker Rights: Employment protections',
                                    'Consumer Protection: Product standards',
                                    'Data Privacy: GDPR compliance',
                                    'Environmental Rights: Protection standards',
                                    'Equal Treatment: Non-discrimination rules',
                                    'Healthcare Access: Cross-border care',
                                    'Social Security: Benefit coordination',
                                    'Digital Rights: Online protections',
                                    'Family Rights: Cross-border families',
                                    'Citizenship Rights: Status protection'
                                ]
                            }
                        ]
                    }
                ]
            };

            const toggleItem = (id) => {
                const newExpanded = new Set(expandedItems);
                if (newExpanded.has(id)) {
                    newExpanded.delete(id);
                } else {
                    newExpanded.add(id);
                }
                setExpandedItems(newExpanded);
            };

            const FactorItem = ({ factor }) => (
                <div className="ml-6 mb-4">
                    <div 
                        className="flex items-center gap-2 cursor-pointer"
                        onClick={() => toggleItem(factor.id)}
                        style={{ marginBottom: '0.5rem' }}
                    >
                        {expandedItems.has(factor.id) ? 
                            <ChevronDown /> : 
                            <ChevronRight />
                        }
                        <span style={{ fontWeight: 500 }}>{factor.title}</span>
                    </div>
                    {expandedItems.has(factor.id) && (
                        <div className="topic-card" style={{ marginLeft: '1.5rem' }}>
                            <p style={{ marginBottom: '1rem' }}>{factor.summary}</p>
                            
                            <div style={{ marginBottom: '1rem' }}>
                                <h4 style={{ fontWeight: 600, marginBottom: '0.5rem' }}>Expert Views:</h4>
                                <p style={{ marginBottom: '0.5rem' }}>• {factor.expertViews.perspective1}</p>
                                <p>• {factor.expertViews.perspective2}</p>
                            </div>

                            <div style={{ marginBottom: '1rem' }}>
                                <h4 style={{ fontWeight: 600, marginBottom: '0.5rem' }}>Sources:</h4>
                                {factor.sources.map((source, index) => (
                                    <p key={index} style={{ marginBottom: '0.25rem' }}>• {source}</p>
                                ))}
                            </div>

                            <div>
                                <h4 style={{ fontWeight: 600, marginBottom: '0.5rem' }}>Key Considerations:</h4>
                                {factor.subfactors.map((subfactor, index) => (
                                    <p key={index} style={{ marginBottom: '0.25rem' }}>• {subfactor}</p>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );

            const SubtopicItem = ({ subtopic }) => (
                <div style={{ marginBottom: '1rem' }}>
                    <div 
                        className="flex items-center gap-2 cursor-pointer"
                        onClick={() => toggleItem(subtopic.id)}
                        style={{ marginBottom: '0.5rem' }}
                    >
                        {expandedItems.has(subtopic.id) ? 
                            <ChevronDown /> : 
                            <ChevronRight />
                        }
                        <span style={{ fontWeight: 600, fontSize: '1.25rem' }}>{subtopic.title}</span>
                    </div>
                    {expandedItems.has(subtopic.id) && (
                        <div>
                            <p style={{ marginLeft: '2rem', marginBottom: '1rem', opacity: 0.9 }}>
                                {subtopic.summary}
                            </p>
                            {subtopic.factors.map((factor) => (
                                <FactorItem key={factor.id} factor={factor} />
                            ))}
                        </div>
                    )}
                </div>
            );

            return (
                <div className="main-container">
                    <div className="glassmorphic">
                        <button
                            className="gradient-button"
                            onClick={() => setIsExpanded(!isExpanded)}
                        >
                            {sampleBreakdown.title}
                        </button>
                        
                        {isExpanded && (
                            <div style={{ marginTop: '1.5rem', borderTop: '1px solid rgba(255,255,255,0.2)', paddingTop: '1.5rem' }}>
                                {sampleBreakdown.subtopics.map((subtopic) => (
                                    <SubtopicItem key={subtopic.id} subtopic={subtopic} />
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(
            <TopicBreakdown />,
            document.getElementById('root')
        );
    </script>
</body>
</html>